# Chromaprint Windows 安装说明

## 问题
`pyacoustid` 需要 `chromaprint` 的 `fpcalc.exe` 工具来计算音频指纹。**注意：不要安装 Python 的 `chromaprint` 包（那只是一个占位包）**，需要安装实际的二进制文件。

## 解决方案

### 方法1：下载预编译的 fpcalc.exe（推荐）

1. 访问 https://acoustid.org/chromaprint
2. 下载 Windows 版本的 chromaprint（通常是 zip 压缩包）
3. 解压后找到 `fpcalc.exe`
4. 将 `fpcalc.exe` 放到以下任一位置：
   - Python 安装目录（如 `C:\Users\你的用户名\AppData\Local\Programs\Python\Python313\`）
   - 系统 PATH 环境变量中的任何目录（如 `C:\Windows\System32\`）
   - 或者项目目录中，然后在代码中取消注释并设置 `FPCALC_PATH` 变量

### 方法2：使用 Chocolatey 安装（如果有 Chocolatey）

```powershell
choco install chromaprint
```

### 方法3：使用 Scoop 安装（如果有 Scoop）

```powershell
scoop install chromaprint
```

## 验证安装

安装后，在命令行运行：
```bash
fpcalc --version
```

如果显示版本号（如 `fpcalc version 1.5.1`），说明安装成功。

## 如果仍然有问题

如果已经安装了 `fpcalc.exe` 但仍然报错，可以：

1. 在代码中取消注释 `FPCALC_PATH` 变量
2. 设置 `FPCALC_PATH` 为 `fpcalc.exe` 的完整路径
3. 例如：`FPCALC_PATH = r"C:\chromaprint\fpcalc.exe"`

